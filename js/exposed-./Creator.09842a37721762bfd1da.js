(self.webpackChunklearningResources=self.webpackChunklearningResources||[]).push([[65],{8136:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ie});var a=n(4065),r=n.n(a),l=n(3600),s=n(693),i=n(6475),o=n(4277),c=n(2045),u=n(8779),d=n(1109),m=n(7173),p=n(8124),h=n(8191),v=n(2298),k=n(9739),b=n(3826),f=n(8340),g=n(8778),E=n(3983);const y=Object.freeze({documentation:{displayName:"Documentation",tagColor:"orange",fields:{url:!0},extraMetadata:{externalDocumentation:!0}},quickstart:{displayName:"Quickstart",tagColor:"green",hasDuration:!0,fields:{duration:!0},hasTasks:!0,extraMetadata:{}},learningPath:{displayName:"Learning path",tagColor:"cyan",fields:{url:!0},extraMetadata:{learningPath:!0}},other:{displayName:"Other",tagColor:"purple",fields:{url:!0},extraMetadata:{otherResource:!0}}});function C(e){return Object.hasOwn(y,e)}function S(e){return y[e]}const w=Object.freeze(Object.keys(y)),x=Object.entries(y).map((([e,t])=>{if(!C(e))throw new Error("unexpected item kind");return[e,t]}));var T=n(9087),N=n(363),P=n(1743);const A={type:T.DC.REQUIRED},L="kind",I="title",$="bundles",R="description",_="duration",q="panel-overview",D="prerequisites",M="tasks",B="task-titles",Q="description",O="enable_work_check",F="work_check_instructions",z="work_check_help",Z="step-task-detail-";function X(e){return`${Z}${e}`}function V({index:e,panelStepTitle:t,downloadStep:n}){const a=`${M}[${e}]`,l={when:`${a}.${O}`,is:!0};return{name:X(e),title:`Task ${e+1}`,substepOf:t,fields:[{component:"lr-task-title-preview",name:`internal-task-title-preview[${e}]`,index:e},{component:T.yb.PLAIN_TEXT,name:"internal-text-task-step-description",label:"Add the content for this step of the panel."},{component:T.yb.TEXTAREA,name:`${a}.${Q}`,label:"Description",resizeOrientation:"vertical"},{component:T.yb.SWITCH,name:`${a}.${O}`,label:"Show 'Work check' section"},{component:T.yb.PLAIN_TEXT,name:"internal-text-check-work-explanation",condition:l,label:"Add the content to display in the 'Check your work box."},{component:T.yb.TEXTAREA,name:`${a}.${F}`,condition:l,label:"Work check instructions",resizeOrientation:"vertical"},{component:T.yb.TEXT_FIELD,condition:l,label:"Optional failure message",name:`${a}.${z}`,placeholder:"Try completing the task again"}],nextStep:({values:t})=>e+1<(t?.[B]?.length??0)?X(e+1):n,buttonLabels:{next:r().createElement(T.lP,{subscription:{values:!0}},(t=>e+1<t.values[B].length?`Create task ${e+2} content`:"Approve and generate files"))}}}var W=n(7081);const j="step-panel-overview-";function K(e){return`${j}${e}`}const H="step-details-";function U(e){return`${H}${e}`}const J="step-kind",Y=r().createContext({files:[],onChangeCurrentStage:()=>{},resetCreator:()=>{}}),G="step-download",ee=e=>{const{resetCreator:t}=(0,a.useContext)(Y);return r().createElement(r().Fragment,null,r().createElement(m.zx,{type:"button",variant:"secondary",isDisabled:e.disableBack,onClick:()=>e.handlePrev()},"Back"),r().createElement(m.zx,{type:"button",variant:"secondary",icon:r().createElement(W.ZP,null),onClick:t},"Add another learning resource"))},te=e=>r().createElement(T.lP,{subscription:{pristine:!0,valid:!0,validating:!0,values:!0}},(t=>{const n=e.nextStep?e.selectNext(e.nextStep,(()=>t)):void 0;return r().createElement(r().Fragment,null,r().createElement(m.zx,{type:"button",variant:"secondary",isDisabled:e.disableBack,onClick:()=>e.handlePrev()},"Back"),void 0!==n?e.renderNextButton({submitLabel:"Next"}):null)})),ne="Create panel";var ae=n(5140),re=n(5240);const le=({type:e="button",children:t,icon:n,...a})=>r().createElement("button",{...a,type:e,className:`pf-v5-u-background-color-200 ${a.className??""}`,style:{border:"none",...a.style??{}}},r().createElement("span",{className:void 0!==n?"pf-v5-u-mr-sm":""},t),n);var se=n(9775),ie=n(7828),oe=n(6621),ce=n(7452),ue=n(1140),de=n(3047);const me=e=>{const{input:t,meta:n,...l}=(0,T.CP)(e),s=(0,a.useId)(),i=l.id||s,o=n.touched&&n.invalid,c={onFocus:t.onFocus,onBlur:t.onBlur};return r().createElement(se.c,{label:l.label,isRequired:l.isRequired,fieldId:i},r().createElement(ue.Y,{id:i,inputName:t.name,value:t.value,validated:o?"error":"default",min:l.minValue,max:l.maxValue,unit:l.unit,onPlus:()=>t.onChange((t.value??0)+1),onMinus:()=>t.onChange((t.value??0)-1),onChange:e=>t.onChange(e.currentTarget.valueAsNumber),...c,plusBtnProps:c,minusBtnProps:c}),o?r().createElement(ie.Q,null,r().createElement(oe.p,null,r().createElement(ce.u,{variant:"error",icon:r().createElement(de.ZP,null)},n.error))):null)};var pe=n(399),he=n(2607),ve=n(1415);const ke=[],be=e=>`Item ${e+1}`,fe=e=>{const t=(0,a.useId)(),{input:n,...l}=(0,T.CP)(e),s=(0,a.useId)(),i=l.id||s,o=l.defaultItem??"",c=n.value??ke,u=l.itemLabel??be,d=l.minItems,p=l.maxItems;if(void 0!==d&&c.length<d){const e=[...c];for(let t=0;t<d-c.length;++t)e.push(o);n.onChange(e)}const k=void 0===d||c.length>d,b=void 0===p||c.length<p,f=l.addLabel??"Add item",g=l.addLabelIcon,E=l.fullMessage??"No more items can be added";return r().createElement(pe.h,{title:l.label??"Array",id:i,name:n.name,className:"pf-v5-u-m-0"},r().createElement("div",{className:"pf-v5-c-form pf-m-horizontal"},c.map(((e,a)=>{const l=`${t}-${a}-title`;return r().createElement(se.c,{key:a,label:u(a),fieldId:l,isRequired:!0},r().createElement(h.k,{gap:{default:"gapNone"}},r().createElement(v.B,{grow:{default:"grow"}},r().createElement(he.oi,{id:l,name:`${n.name}[index]`,isRequired:!0,type:"text",value:e,onChange:(e,t)=>{const r=[...c];r[a]=t,n.onChange(r)}})),k?r().createElement(v.B,null,r().createElement(m.zx,{"aria-label":`Remove item ${a+1}`,variant:"plain",icon:r().createElement(ve.ZP,null),onClick:()=>n.onChange(c.toSpliced(a,1))})):null))}))),b?r().createElement(m.zx,{variant:"link",icon:g,onClick:()=>n.onChange(c.concat(o)),isInline:!0},f):r().createElement("span",null,E))},ge=[""],Ee={},ye=({values:e,onChangeKind:t,onChangeBundles:n,onChangeQuickStartSpec:r})=>{const l=e[$];(0,a.useEffect)((()=>{n(l??[])}),[l]);const s=e[L],i=e[I],o=e[R],c=e.url,u=e[_],d=e[D],m=e[q],p=e[B]??ge,h=e[M],v="string"==typeof s&&C(s)?s:null,k=null!==v?S(v):null;(0,a.useEffect)((()=>{t(v)}),[v]);const b=(0,a.useMemo)((()=>{if(!0!==k?.hasTasks)return;const e=[];for(let t=0;t<p.length;++t){const n=h?.[t];e.push({title:p[t],description:n?.description??"",review:n?.enable_work_check?{instructions:n?.work_check_instructions,failedTaskHelp:n?.work_check_help}??"":void 0})}return e}),[k,p,h]);(0,a.useEffect)((()=>{r({type:null!==k?{text:k.displayName,color:k.tagColor}:void 0,displayName:i??"",description:o??"",icon:null,link:k?.fields?.url&&void 0!==c?{text:"View documentation",href:c}:void 0,durationMinutes:k?.fields?.duration&&"number"==typeof u?u:void 0,prerequisites:!0===k?.hasTasks?d:void 0,introduction:!0===k?.hasTasks?m:void 0,tasks:b}),t(v)}),[k,s,i,o,c,u,d,m,b])},Ce=()=>{const{files:e}=(0,a.useContext)(Y);function t(e){const t=e.name.lastIndexOf("."),n=-1!==t?e.name.substring(0,t):e.name,a=-1!==t?e.name.substring(t+1):"txt";(0,re.Sv)(e.content,n,a)}return r().createElement("div",null,r().createElement(d.j,{screenReaderText:"Files successfully generated!",variant:"green"},r().createElement(h.k,{spaceItems:{default:"spaceItemsSm"}},r().createElement(v.B,null,r().createElement(g.ZP,null)),r().createElement(v.B,null,"Files successfully generated!"))),r().createElement(k.K,{hasGutter:!0,className:"pf-v5-u-m-lg"},r().createElement(b.v,null,r().createElement(f.x,null,"Download these files and use them to create the learning resource PR in the"," ",r().createElement("a",{href:"https://github.com/RedHatInsights/quickstarts/tree/main/docs/quickstarts",target:"_blank",rel:"noreferrer"}," ","correct repo"),".")),r().createElement(b.v,null,r().createElement(m.zx,{variant:"primary",icon:r().createElement(E.ZP,null),onClick:()=>e.forEach((e=>t(e)))},"Download all (",e.length,") files")),e.map((e=>r().createElement(b.v,{key:e.name},r().createElement(le,{icon:r().createElement(E.ZP,null),className:"pf-v5-u-mb-sm",onClick:()=>t(e)},e.name),r().createElement(p.M5,{isCode:!0,isReadOnly:!0,variant:p.oo.expansion,hoverTip:"Copy",clickTip:"Copied"},e.content))))))},Se=()=>{const e=(0,a.useContext)(N.default),t=(0,a.useContext)(Y);(0,a.useEffect)((()=>{t.onChangeCurrentStage(function(e){if(function(e){return e===J}(e)||function(e){return e.startsWith(H)}(e))return{type:"card"};if(function(e){return e.startsWith(j)}(e))return{type:"panel-overview"};if(function(e){return e.startsWith(Z)}(e))return{type:"task",index:(()=>{const t=function(e){return e.startsWith(Z)?parseInt(e.substring(Z.length)):null}(e);if(null===t)throw new Error("unable to parse task index");return t})()};if(function(e){return e===G}(e))return{type:"download"};throw new Error("unable to parse step name: "+e)}(e.currentStep.name))}),[e.currentStep.name])},we=({index:e})=>r().createElement(T.lP,{subscription:{values:!0}},(t=>r().createElement(u.D,{headingLevel:"h3"},t.values?.[B]?.[e]??""))),xe=({onChangeKind:e,onChangeQuickStartSpec:t,onChangeBundles:n,onChangeCurrentStage:l,resetCreator:s,files:i})=>{const o=(0,ae.Z)(),c=(0,a.useMemo)((()=>function(e){const t=e.getAvailableBundles(),n=[];for(let e=0;e<10;++e)n.push(V({index:e,panelStepTitle:ne,downloadStep:G}));const a={component:T.yb.WIZARD,name:"wizard-learning-resource",isDynamic:!0,crossroads:[L,B],fields:[{name:J,title:"Select content type",fields:[{component:T.yb.PLAIN_TEXT,name:"internal-text-kind-description",label:"Learning resources are grouped by their 'content type'."},{component:T.yb.RADIO,name:L,label:"Select content type",simpleValue:!0,options:x.map((([e,t])=>({value:e,label:t.displayName}))),isRequired:!0,validate:[A]}],nextStep:{when:L,stepMapper:Object.fromEntries(w.map((e=>[e,U(e)])))}},...w.map((e=>function({kind:e,bundles:t,downloadStep:n}){const a=S(e),l=[];var s;return l.push({component:T.yb.PLAIN_TEXT,name:"internal-text-details-description",label:"Share the details required to populate a card in the correct places."},{component:T.yb.SELECT,name:$,label:"Associated bundle(s)",simpleValue:!0,isMulti:!0,placeholder:"Select all that apply",options:t.map((e=>({value:e.id,label:`${e.title} (${e.id})`}))),isRequired:!0,validate:[A]},{component:T.yb.TEXT_FIELD,name:I,label:"Resource title",placeholder:"Title to display on card",isRequired:!0,validate:[A]},{component:T.yb.TEXTAREA,name:R,label:"Resource description",placeholder:"Short description of resource and will auto-truncate on card with '...' after 3 lines of text.",isRequired:!0,validate:[A],resizeOrientation:"vertical"}),a.fields.duration&&l.push({component:"lr-number-input",name:_,label:"Duration",unit:r().createElement("span",{className:"pf-v5-u-text-nowrap"},"minutes"),dataType:T.DJ.NUMBER,initialValue:0,minValue:0,isRequired:!0,validate:[A]}),a.fields.url&&l.push({component:T.yb.TEXT_FIELD,name:"url",label:"Endpoint URL",placeholder:"http://url.redhat.com/docs-n-things",isRequired:!0,validate:[A,{type:T.DC.URL}],condition:(s=e=>!0===e.fields.url,{when:L,is:e=>"string"==typeof e&&C(e)&&s(S(e))})}),{name:U(e),title:`${a.displayName} details`,fields:l,nextStep:a.hasTasks?K(e):n,buttonLabels:{next:a.hasTasks?`Approve card and create ${a.displayName} panel`:"Approve card and generate files"}}}({kind:e,bundles:t,downloadStep:G}))),...w.filter((e=>S(e).hasTasks)).map((e=>function({kind:e,panelStepTitle:t}){const n=S(e);return{name:K(e),title:"Create overview",substepOf:t,fields:[{component:T.yb.PLAIN_TEXT,name:"internal-text-overview-instructions",label:`Share the required details to show on the introduction (first view) in the ${n.displayName}. Details that you entered in the previous steps have been brought in automatically.`},{component:T.yb.PLAIN_TEXT,name:"internal-text-overview-header",label:r().createElement(u.D,{headingLevel:"h3"},n.displayName," overview")},{component:T.yb.TEXTAREA,name:q,label:"Introduction (Markdown)",resizeOrientation:"vertical"},{component:T.yb.FIELD_ARRAY,name:D,label:"Prerequisites",noItemsMessage:"No prerequisites have been added.",fields:[{component:T.yb.TEXT_FIELD,label:"Prerequisite"}]},{component:"lr-string-array",name:B,label:"Tasks",minItems:1,maxItems:10,initialValue:[""],fullMessage:"Only 10 tasks can be added.",itemLabel:e=>`Task ${e+1}`,addLabel:"Add another task",addLabelIcon:r().createElement(W.ZP,null)}],nextStep:X(0),buttonLabels:{next:"Create task 1 content"}}}({kind:e,panelStepTitle:ne}))),...n,{name:G,title:"Download files",fields:[{component:"lr-download-files",name:"internal-download"}],hasNoBodyPadding:!0,buttons:ee}]};return{fields:[{...a,fields:a.fields.map((e=>{const t={...e};return t.fields=[...t.fields,{component:"lr-wizard-spy",name:`internal-wizard-spies.${t.name}`}],void 0===t.buttons&&(t.buttons=te),void 0!==t.buttonLabels&&(t.buttonLabels={next:"Next",cancel:"Cancel",back:"Back",...t.buttonLabels},void 0===t.buttonLabels.submit&&(t.buttonLabels.submit=t.buttonLabels.next)),t}))}]}}(o)),[]),d=(0,a.useMemo)((()=>({files:i,onChangeCurrentStage:l,resetCreator:s})),[i,l]),m={...P.ZP,"lr-number-input":me,"lr-download-files":Ce,"lr-wizard-spy":Se,"lr-task-title-preview":we,"lr-string-array":fe};return r().createElement(Y.Provider,{value:d},r().createElement(T.lT,{onSubmit:()=>{},schema:c,componentMapper:m},(({formFields:a})=>r().createElement("form",{onSubmit:e=>e.preventDefault(),className:"pf-v5-c-form"},r().createElement(T.lP,{subscription:{values:!0}},(a=>r().createElement(ye,{values:a.values,onChangeKind:e,onChangeBundles:n,onChangeQuickStartSpec:t}))),r().createElement(r().Fragment,null,a)))))};var Te=n(474),Ne=n(4634);const Pe=({kindMeta:e,quickStart:t,currentStage:n})=>{const l=(0,a.useMemo)((()=>[t]),[t]),[s,i]=(0,a.useState)({}),[o,c]=(0,a.useState)(n),d=(0,a.useContext)(Te.QuickStartContext),m=e?.hasTasks&&("panel-overview"===n.type||"task"===n.type),p=(0,Te.useValuesForQuickStartContext)({allQuickStarts:[t],activeQuickStartID:m?t.metadata.name:"",setActiveQuickStartID:()=>{},allQuickStartStates:s,setAllQuickStartStates:e=>i(e),useQueryParams:!1,footer:d.footer,focusOnQuickStart:!1});return p.allQuickStarts?.[0]!==t&&p.setAllQuickStarts?.([t]),o!==n&&(c(n),"panel-overview"===n.type?p.restartQuickStart?.(t.metadata.name,t.spec.tasks?.length??0):"task"===n.type&&p.setQuickStartTaskNumber?.(t.metadata.name,n.index)),r().createElement(h.k,{direction:{default:"column"},gap:{default:"gapNone"},className:"pf-v5-u-h-100"},r().createElement(v.B,null,r().createElement(u.D,{headingLevel:"h2",size:"xl",className:"pf-v5-u-mb-md"},"Live ",m?e.displayName:"card"," preview")),r().createElement(v.B,{grow:{default:"grow"}},r().createElement(Te.QuickStartContext.Provider,{value:p},r().createElement(Te.QuickStartDrawer,{quickStarts:l},r().createElement("section",null,m?null:r().createElement("div",{className:"rc-tile-preview-wrapper"},r().createElement(Ne.Z,{quickStart:t,bookmarks:null,isActive:!1,status:Te.QuickStartStatus.NOT_STARTED})))))))},Ae={name:"test-quickstart"},Le=({resetCreator:e})=>{const[t,n]=(0,a.useState)(null),[d,m]=(0,a.useState)({metadata:{name:"test-quickstart"},spec:{displayName:"",icon:null,description:""}}),p=null!==t?{id:t,meta:S(t)}:null,[h,v]=(0,a.useState)([]),[k,b]=(0,a.useState)({type:"card"}),f="download"!==k.type,g=(0,a.useMemo)((()=>function(e,t){const n=null!==e?S(e):null;return{...t,metadata:{...t.metadata,name:"test-quickstart",...n?.extraMetadata??{}}}}(t,d)),[t,d]),E=(0,a.useMemo)((()=>{const e=g.spec.displayName.toLowerCase().replaceAll(/\s/g,"-").replaceAll(/(^-+)|(-+$)/g,""),t={...g,spec:{...g.spec,icon:void 0},metadata:{...g.metadata,name:e}};return[{name:"metadata.yaml",content:l.ZP.stringify({kind:"QuickStarts",name:e,tags:h.toSorted().map((e=>({kind:"bundle",value:e})))})},{name:`${e}.yaml`,content:l.ZP.stringify(t)}]}),[g,h]);return r().createElement(o.C,null,r().createElement(c.NP,{className:"rc-header"},r().createElement(u.D,{headingLevel:"h1",size:"2xl"},"Add new learning resource"),r().createElement("p",null,"Add cards to the learning resources spaces within console.redhat.com."," ",r().createElement("a",{href:"https://docs.google.com/presentation/d/1FiwBc_VuCxvobv80suXww0eKEs381MgR1WK6q7_DynY/edit#slide=id.g1b95fa54a9f_0_801",target:"_blank",rel:"noreferrer"},"Learn more about Hybrid Cloud Console Learning Resources."))),r().createElement(c.NP,{isFilled:!0,padding:{default:"noPadding"}},r().createElement(s.r,{hasGutter:!0,className:"pf-v5-u-h-100 pf-v5-u-w-100"},r().createElement(i.P,{span:12,lg:f?6:12},r().createElement(xe,{onChangeKind:e=>{if(null!==e){const t=S(e);m((e=>{const n={};return n.spec={...e.spec},n.spec.type={text:t.displayName,color:t.tagColor},!t.hasTasks||void 0!==e.spec.tasks&&0!==e.spec.tasks.length||(n.spec.tasks=[Ee]),t.hasTasks||(n.spec.tasks=void 0,n.spec.introduction=void 0,n.spec.prerequisites=[]),t.fields.url||(n.spec.link=void 0),t.fields.duration||(n.spec.durationMinutes=void 0),n.metadata={...Ae,...t.extraMetadata},{...e,...n}}))}n(e)},onChangeQuickStartSpec:e=>{var t;t=()=>e,m((e=>({...e,spec:{...e.spec,...t(e.spec)}})))},onChangeBundles:v,onChangeCurrentStage:b,resetCreator:e,files:E})),f?r().createElement(i.P,{span:12,lg:6,className:"pf-v5-u-pt-md-on-lg"},r().createElement(Pe,{kindMeta:p?.meta??null,quickStart:g,currentStage:k})):null)))},Ie=()=>{const[e,t]=(0,a.useState)(0n);return r().createElement(Le,{key:e,resetCreator:()=>t((e=>e+1n))})}},4634:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var a=n(4065),r=n.n(a),l=n(474),s=n(3864),i=n(7582),o=n(4580);const c=()=>r().createElement(o.J,{className:"lr-c-bookmark__icon"},r().createElement(i.ZP,null)),u=()=>r().createElement(o.J,{className:"lr-c-bookmark__icon"},r().createElement(s.ZP,null)),d=({quickStart:e,bookmarks:t,isActive:n,status:a})=>r().createElement("div",{className:"lr-c-quickstart_tile"},r().createElement(l.QuickStartTile,{action:null!==t?{"aria-label":t.isFavorite?`Remove quickstart ${e.spec.displayName} from bookmarks.`:`Bookmark quickstart ${e.spec.displayName}.`,icon:t.isFavorite?u:c,onClick:e=>{e.preventDefault(),e.stopPropagation(),t.setFavorite(!t.isFavorite)}}:void 0,quickStart:{...e,spec:{...e.spec,icon:null}},isActive:n,status:a}))},1792:()=>{},7890:()=>{},7657:()=>{},2972:()=>{},3389:()=>{},5467:()=>{},347:()=>{},1452:()=>{},5594:()=>{},8392:()=>{},4946:()=>{},497:()=>{},2857:()=>{},7625:()=>{},108:()=>{},4476:()=>{},187:()=>{},837:()=>{},479:()=>{},6025:()=>{},1338:()=>{},4839:()=>{},4282:()=>{},8572:()=>{},8379:()=>{},5238:()=>{},9076:()=>{},2084:()=>{},1508:()=>{},1993:()=>{},9624:()=>{},7479:()=>{},6822:()=>{},3661:()=>{},6024:()=>{},3390:()=>{},2143:()=>{},314:()=>{},9854:()=>{},209:()=>{},7234:()=>{},8299:()=>{},2816:()=>{},3519:()=>{}}]);
//# sourceMappingURL=../../sourcemaps/exposed-./Creator.fc7078f7d6c5f5757d3cf86c7b4baecf.js.map