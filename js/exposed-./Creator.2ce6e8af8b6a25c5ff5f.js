(self.webpackChunklearningResources=self.webpackChunklearningResources||[]).push([[553],{7494:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Re});var a=n(1680),r=n.n(a),l=n(8202),s=n(620),i=n(3215),o=n(4114),c=n(3802),u=n(316),d=n(6539),m=n(2583),p=n(6165),h=n(6998),v=n(6553),k=n(678),f=n(3113),E=n(2069),b=n(9202),g=n(3331);const y=Object.freeze({documentation:{displayName:"Documentation",tagColor:"orange",fields:{url:!0},extraMetadata:{externalDocumentation:!0}},quickstart:{displayName:"Quickstart",tagColor:"green",hasDuration:!0,fields:{duration:!0},hasTasks:!0,extraMetadata:{}},learningPath:{displayName:"Learning path",tagColor:"cyan",fields:{url:!0},extraMetadata:{learningPath:!0}},other:{displayName:"Other",tagColor:"purple",fields:{url:!0},extraMetadata:{otherResource:!0}}});function S(e){return Object.hasOwn(y,e)}function C(e){return y[e]}const w=Object.freeze(Object.keys(y)),x=Object.entries(y).map((([e,t])=>{if(!S(e))throw new Error("unexpected item kind");return[e,t]}));var T=n(6776),A=n(6347),R=n(3084);const N={type:T.e5.REQUIRED},$="kind",I="title",L="bundles",_="description",q="duration",D="panel-overview",P="prerequisites",M="tasks",Q="task-titles",O="enable_work_check",B="step-task-detail-";function F(e){return`${B}${e}`}function X({index:e,panelStepTitle:t,downloadStep:n}){const a=`${M}[${e}]`,l={when:`${a}.${O}`,is:!0};return{name:F(e),title:`Task ${e+1}`,substepOf:t,fields:[{component:"lr-task-title-preview",name:`internal-task-title-preview[${e}]`,index:e},{component:T.Ru.PLAIN_TEXT,name:"internal-text-task-step-description",label:"Add the content for this step of the panel."},{component:T.Ru.TEXTAREA,name:`${a}.description`,label:"Description",resizeOrientation:"vertical"},{component:T.Ru.SWITCH,name:`${a}.${O}`,label:"Show 'Work check' section"},{component:T.Ru.PLAIN_TEXT,name:"internal-text-check-work-explanation",condition:l,label:"Add the content to display in the 'Check your work box."},{component:T.Ru.TEXTAREA,name:`${a}.work_check_instructions`,condition:l,label:"Work check instructions",resizeOrientation:"vertical"},{component:T.Ru.TEXT_FIELD,condition:l,label:"Optional failure message",name:`${a}.work_check_help`,placeholder:"Try completing the task again"}],nextStep:({values:t})=>e+1<(t?.[Q]?.length??0)?F(e+1):n,buttonLabels:{next:r().createElement(T.Pc,{subscription:{values:!0}},(t=>e+1<t.values[Q].length?`Create task ${e+2} content`:"Approve and generate files"))}}}var z=n(6862);const V="step-panel-overview-";function W(e){return`${V}${e}`}const K="step-details-";function j(e){return`${K}${e}`}const Z="step-kind",H=r().createContext({files:[],onChangeCurrentStage:()=>{},resetCreator:()=>{}}),U="step-download",G=e=>{const{resetCreator:t}=(0,a.useContext)(H);return r().createElement(r().Fragment,null,r().createElement(m.$n,{type:"button",variant:"secondary",isDisabled:e.disableBack,onClick:()=>e.handlePrev()},"Back"),r().createElement(m.$n,{type:"button",variant:"secondary",icon:r().createElement(z.Ay,null),onClick:t},"Add another learning resource"))},Y=e=>r().createElement(T.Pc,{subscription:{pristine:!0,valid:!0,validating:!0,values:!0}},(t=>{const n=e.nextStep?e.selectNext(e.nextStep,(()=>t)):void 0;return r().createElement(r().Fragment,null,r().createElement(m.$n,{type:"button",variant:"secondary",isDisabled:e.disableBack,onClick:()=>e.handlePrev()},"Back"),void 0!==n?e.renderNextButton({submitLabel:"Next"}):null)})),J="Create panel";var ee=n(881),te=n(6840);const ne=({type:e="button",children:t,icon:n,...a})=>r().createElement("button",{...a,type:e,className:`pf-v5-u-background-color-200 ${a.className??""}`,style:{border:"none",...a.style??{}}},r().createElement("span",{className:void 0!==n?"pf-v5-u-mr-sm":""},t),n);var ae=n(6780),re=n(1864),le=n(9257),se=n(9318),ie=n(3996),oe=n(1003);const ce=e=>{const{input:t,meta:n,...l}=(0,T.Ko)(e),s=(0,a.useId)(),i=l.id||s,o=n.touched&&n.invalid,c={onFocus:t.onFocus,onBlur:t.onBlur};return r().createElement(ae.g,{label:l.label,isRequired:l.isRequired,fieldId:i},r().createElement(ie.Q,{id:i,inputName:t.name,value:t.value,validated:o?"error":"default",min:l.minValue,max:l.maxValue,unit:l.unit,onPlus:()=>t.onChange((t.value??0)+1),onMinus:()=>t.onChange((t.value??0)-1),onChange:e=>t.onChange(e.currentTarget.valueAsNumber),...c,plusBtnProps:c,minusBtnProps:c}),o?r().createElement(re.e,null,r().createElement(le.E,null,r().createElement(se.j,{variant:"error",icon:r().createElement(oe.Ay,null)},n.error))):null)};var ue=n(9752),de=n(3285),me=n(3158);const pe=[],he=e=>`Item ${e+1}`,ve=e=>{const t=(0,a.useId)(),{input:n,...l}=(0,T.Ko)(e),s=(0,a.useId)(),i=l.id||s,o=l.defaultItem??"",c=n.value??pe,u=l.itemLabel??he,d=l.minItems,p=l.maxItems;if(void 0!==d&&c.length<d){const e=[...c];for(let t=0;t<d-c.length;++t)e.push(o);n.onChange(e)}const k=void 0===d||c.length>d,f=void 0===p||c.length<p,E=l.addLabel??"Add item",b=l.addLabelIcon,g=l.fullMessage??"No more items can be added";return r().createElement(ue.y,{title:l.label??"Array",id:i,name:n.name,className:"pf-v5-u-m-0"},r().createElement("div",{className:"pf-v5-c-form pf-m-horizontal"},c.map(((e,a)=>{const l=`${t}-${a}-title`;return r().createElement(ae.g,{key:a,label:u(a),fieldId:l,isRequired:!0},r().createElement(h.s,{gap:{default:"gapNone"}},r().createElement(v.Z,{grow:{default:"grow"}},r().createElement(de.ks,{id:l,name:`${n.name}[index]`,isRequired:!0,type:"text",value:e,onChange:(e,t)=>{const r=[...c];r[a]=t,n.onChange(r)}})),k?r().createElement(v.Z,null,r().createElement(m.$n,{"aria-label":`Remove item ${a+1}`,variant:"plain",icon:r().createElement(me.Ay,null),onClick:()=>n.onChange(c.toSpliced(a,1))})):null))}))),f?r().createElement(m.$n,{variant:"link",icon:b,onClick:()=>n.onChange(c.concat(o)),isInline:!0},E):r().createElement("span",null,g))},ke=[""],fe={},Ee=({values:e,onChangeKind:t,onChangeBundles:n,onChangeQuickStartSpec:r})=>{const l=e[L];(0,a.useEffect)((()=>{n(l??[])}),[l]);const s=e[$],i=e[I],o=e[_],c=e.url,u=e[q],d=e[P],m=e[D],p=e[Q]??ke,h=e[M],v="string"==typeof s&&S(s)?s:null,k=null!==v?C(v):null;(0,a.useEffect)((()=>{t(v)}),[v]);const f=(0,a.useMemo)((()=>{if(!0!==k?.hasTasks)return;const e=[];for(let t=0;t<p.length;++t){const n=h?.[t];e.push({title:p[t],description:n?.description??"",review:n?.enable_work_check?{instructions:n?.work_check_instructions,failedTaskHelp:n?.work_check_help}:void 0})}return e}),[k,p,h]);(0,a.useEffect)((()=>{r({type:null!==k?{text:k.displayName,color:k.tagColor}:void 0,displayName:i??"",description:o??"",icon:null,link:k?.fields?.url&&void 0!==c?{text:"View documentation",href:c}:void 0,durationMinutes:k?.fields?.duration&&"number"==typeof u?u:void 0,prerequisites:!0===k?.hasTasks?d:void 0,introduction:!0===k?.hasTasks?m:void 0,tasks:f}),t(v)}),[k,s,i,o,c,u,d,m,f])},be=()=>{const{files:e}=(0,a.useContext)(H);function t(e){const t=e.name.lastIndexOf("."),n=-1!==t?e.name.substring(0,t):e.name,a=-1!==t?e.name.substring(t+1):"txt";(0,te.PE)(e.content,n,a)}return r().createElement("div",null,r().createElement(d.l,{screenReaderText:"Files successfully generated!",variant:"green"},r().createElement(h.s,{spaceItems:{default:"spaceItemsSm"}},r().createElement(v.Z,null,r().createElement(b.Ay,null)),r().createElement(v.Z,null,"Files successfully generated!"))),r().createElement(k.B,{hasGutter:!0,className:"pf-v5-u-m-lg"},r().createElement(f.a,null,r().createElement(E.E,null,"Download these files and use them to create the learning resource PR in the"," ",r().createElement("a",{href:"https://github.com/RedHatInsights/quickstarts/tree/main/docs/quickstarts",target:"_blank",rel:"noreferrer"}," ","correct repo"),".")),r().createElement(f.a,null,r().createElement(m.$n,{variant:"primary",icon:r().createElement(g.Ay,null),onClick:()=>e.forEach((e=>t(e)))},"Download all (",e.length,") files")),e.map((e=>r().createElement(f.a,{key:e.name},r().createElement(ne,{icon:r().createElement(g.Ay,null),className:"pf-v5-u-mb-sm",onClick:()=>t(e)},e.name),r().createElement(p.Ck,{isCode:!0,isReadOnly:!0,variant:p.$X.expansion,hoverTip:"Copy",clickTip:"Copied"},e.content))))))},ge=()=>{const e=(0,a.useContext)(A.default),t=(0,a.useContext)(H);(0,a.useEffect)((()=>{t.onChangeCurrentStage(function(e){if(function(e){return e===Z}(e)||function(e){return e.startsWith(K)}(e))return{type:"card"};if(function(e){return e.startsWith(V)}(e))return{type:"panel-overview"};if(function(e){return e.startsWith(B)}(e))return{type:"task",index:(()=>{const t=function(e){return e.startsWith(B)?parseInt(e.substring(17)):null}(e);if(null===t)throw new Error("unable to parse task index");return t})()};if(function(e){return e===U}(e))return{type:"download"};throw new Error("unable to parse step name: "+e)}(e.currentStep.name))}),[e.currentStep.name])},ye=({index:e})=>r().createElement(T.Pc,{subscription:{values:!0}},(t=>r().createElement(u.h,{headingLevel:"h3"},t.values?.[Q]?.[e]??""))),Se=({onChangeKind:e,onChangeQuickStartSpec:t,onChangeBundles:n,onChangeCurrentStage:l,resetCreator:s,files:i})=>{const o=(0,ee.A)(),c=(0,a.useMemo)((()=>function(e){const t=e.getAvailableBundles(),n=[];for(let e=0;e<10;++e)n.push(X({index:e,panelStepTitle:J,downloadStep:U}));const a={component:T.Ru.WIZARD,name:"wizard-learning-resource",isDynamic:!0,crossroads:[$,Q],fields:[{name:Z,title:"Select content type",fields:[{component:T.Ru.PLAIN_TEXT,name:"internal-text-kind-description",label:"Learning resources are grouped by their 'content type'."},{component:T.Ru.RADIO,name:$,label:"Select content type",simpleValue:!0,options:x.map((([e,t])=>({value:e,label:t.displayName}))),isRequired:!0,validate:[N]}],nextStep:{when:$,stepMapper:Object.fromEntries(w.map((e=>[e,j(e)])))}},...w.map((e=>function({kind:e,bundles:t,downloadStep:n}){const a=C(e),l=[];var s;return l.push({component:T.Ru.PLAIN_TEXT,name:"internal-text-details-description",label:"Share the details required to populate a card in the correct places."},{component:T.Ru.SELECT,name:L,label:"Associated bundle(s)",simpleValue:!0,isMulti:!0,placeholder:"Select all that apply",options:t.map((e=>({value:e.id,label:`${e.title} (${e.id})`}))),isRequired:!0,validate:[N]},{component:T.Ru.TEXT_FIELD,name:I,label:"Resource title",placeholder:"Title to display on card",isRequired:!0,validate:[N]},{component:T.Ru.TEXTAREA,name:_,label:"Resource description",placeholder:"Short description of resource and will auto-truncate on card with '...' after 3 lines of text.",isRequired:!0,validate:[N],resizeOrientation:"vertical"}),a.fields.duration&&l.push({component:"lr-number-input",name:q,label:"Duration",unit:r().createElement("span",{className:"pf-v5-u-text-nowrap"},"minutes"),dataType:T.a9.NUMBER,initialValue:0,minValue:0,isRequired:!0,validate:[N]}),a.fields.url&&l.push({component:T.Ru.TEXT_FIELD,name:"url",label:"Endpoint URL",placeholder:"http://url.redhat.com/docs-n-things",isRequired:!0,validate:[N,{type:T.e5.URL}],condition:(s=e=>!0===e.fields.url,{when:$,is:e=>"string"==typeof e&&S(e)&&s(C(e))})}),{name:j(e),title:`${a.displayName} details`,fields:l,nextStep:a.hasTasks?W(e):n,buttonLabels:{next:a.hasTasks?`Approve card and create ${a.displayName} panel`:"Approve card and generate files"}}}({kind:e,bundles:t,downloadStep:U}))),...w.filter((e=>C(e).hasTasks)).map((e=>function({kind:e,panelStepTitle:t}){const n=C(e);return{name:W(e),title:"Create overview",substepOf:t,fields:[{component:T.Ru.PLAIN_TEXT,name:"internal-text-overview-instructions",label:`Share the required details to show on the introduction (first view) in the ${n.displayName}. Details that you entered in the previous steps have been brought in automatically.`},{component:T.Ru.PLAIN_TEXT,name:"internal-text-overview-header",label:r().createElement(u.h,{headingLevel:"h3"},n.displayName," overview")},{component:T.Ru.TEXTAREA,name:D,label:"Introduction (Markdown)",resizeOrientation:"vertical"},{component:T.Ru.FIELD_ARRAY,name:P,label:"Prerequisites",noItemsMessage:"No prerequisites have been added.",fields:[{component:T.Ru.TEXT_FIELD,label:"Prerequisite"}]},{component:"lr-string-array",name:Q,label:"Tasks",minItems:1,maxItems:10,initialValue:[""],fullMessage:"Only 10 tasks can be added.",itemLabel:e=>`Task ${e+1}`,addLabel:"Add another task",addLabelIcon:r().createElement(z.Ay,null)}],nextStep:F(0),buttonLabels:{next:"Create task 1 content"}}}({kind:e,panelStepTitle:J}))),...n,{name:U,title:"Download files",fields:[{component:"lr-download-files",name:"internal-download"}],hasNoBodyPadding:!0,buttons:G}]};return{fields:[{...a,fields:a.fields.map((e=>{const t={...e};return t.fields=[...t.fields,{component:"lr-wizard-spy",name:`internal-wizard-spies.${t.name}`}],void 0===t.buttons&&(t.buttons=Y),void 0!==t.buttonLabels&&(t.buttonLabels={next:"Next",cancel:"Cancel",back:"Back",...t.buttonLabels},void 0===t.buttonLabels.submit&&(t.buttonLabels.submit=t.buttonLabels.next)),t}))}]}}(o)),[]),d=(0,a.useMemo)((()=>({files:i,onChangeCurrentStage:l,resetCreator:s})),[i,l]),m={...R.Ay,"lr-number-input":ce,"lr-download-files":be,"lr-wizard-spy":ge,"lr-task-title-preview":ye,"lr-string-array":ve};return r().createElement(H.Provider,{value:d},r().createElement(T.SA,{onSubmit:()=>{},schema:c,componentMapper:m},(({formFields:a})=>r().createElement("form",{onSubmit:e=>e.preventDefault(),className:"pf-v5-c-form"},r().createElement(T.Pc,{subscription:{values:!0}},(a=>r().createElement(Ee,{values:a.values,onChangeKind:e,onChangeBundles:n,onChangeQuickStartSpec:t}))),r().createElement(r().Fragment,null,a)))))};var Ce=n(6738),we=n(4198);const xe=({kindMeta:e,quickStart:t,currentStage:n})=>{const l=(0,a.useMemo)((()=>[t]),[t]),[s,i]=(0,a.useState)({}),[o,c]=(0,a.useState)(n),d=(0,a.useContext)(Ce.QuickStartContext),m=e?.hasTasks&&("panel-overview"===n.type||"task"===n.type),p=(0,Ce.useValuesForQuickStartContext)({allQuickStarts:[t],activeQuickStartID:m?t.metadata.name:"",setActiveQuickStartID:()=>{},allQuickStartStates:s,setAllQuickStartStates:e=>i(e),useQueryParams:!1,footer:d.footer,focusOnQuickStart:!1});return p.allQuickStarts?.[0]!==t&&p.setAllQuickStarts?.([t]),o!==n&&(c(n),"panel-overview"===n.type?p.restartQuickStart?.(t.metadata.name,t.spec.tasks?.length??0):"task"===n.type&&p.setQuickStartTaskNumber?.(t.metadata.name,n.index)),r().createElement(h.s,{direction:{default:"column"},gap:{default:"gapNone"},className:"pf-v5-u-h-100"},r().createElement(v.Z,null,r().createElement(u.h,{headingLevel:"h2",size:"xl",className:"pf-v5-u-mb-md"},"Live ",m?e.displayName:"card"," preview")),r().createElement(v.Z,{grow:{default:"grow"}},r().createElement(Ce.QuickStartContext.Provider,{value:p},r().createElement(Ce.QuickStartDrawer,{quickStarts:l},r().createElement("section",null,m?null:r().createElement("div",{className:"rc-tile-preview-wrapper"},r().createElement(we.A,{quickStart:t,bookmarks:null,isActive:!1,status:Ce.QuickStartStatus.NOT_STARTED})))))))},Te={name:"test-quickstart"},Ae=({resetCreator:e})=>{const[t,n]=(0,a.useState)(null),[d,m]=(0,a.useState)({metadata:{name:"test-quickstart"},spec:{displayName:"",icon:null,description:""}}),p=null!==t?{id:t,meta:C(t)}:null,[h,v]=(0,a.useState)([]),[k,f]=(0,a.useState)({type:"card"}),E="download"!==k.type,b=(0,a.useMemo)((()=>function(e,t){const n=null!==e?C(e):null;return{...t,metadata:{...t.metadata,name:"test-quickstart",...n?.extraMetadata??{}}}}(t,d)),[t,d]),g=(0,a.useMemo)((()=>{const e=b.spec.displayName.toLowerCase().replaceAll(/\s/g,"-").replaceAll(/(^-+)|(-+$)/g,""),t={...b,spec:{...b.spec,icon:void 0},metadata:{...b.metadata,name:e}};return[{name:"metadata.yaml",content:l.Ay.stringify({kind:"QuickStarts",name:e,tags:h.toSorted().map((e=>({kind:"bundle",value:e})))})},{name:`${e}.yaml`,content:l.Ay.stringify(t)}]}),[b,h]);return r().createElement(o.v,null,r().createElement(c.d8,{className:"rc-header"},r().createElement(u.h,{headingLevel:"h1",size:"2xl"},"Add new learning resource"),r().createElement("p",null,"Add cards to the learning resources spaces within console.redhat.com."," ",r().createElement("a",{href:"https://docs.google.com/presentation/d/1FiwBc_VuCxvobv80suXww0eKEs381MgR1WK6q7_DynY/edit#slide=id.g1b95fa54a9f_0_801",target:"_blank",rel:"noreferrer"},"Learn more about Hybrid Cloud Console Learning Resources."))),r().createElement(c.d8,{isFilled:!0,padding:{default:"noPadding"}},r().createElement(s.x,{hasGutter:!0,className:"pf-v5-u-h-100 pf-v5-u-w-100"},r().createElement(i.E,{span:12,lg:E?6:12},r().createElement(Se,{onChangeKind:e=>{if(null!==e){const t=C(e);m((e=>{const n={};return n.spec={...e.spec},n.spec.type={text:t.displayName,color:t.tagColor},!t.hasTasks||void 0!==e.spec.tasks&&0!==e.spec.tasks.length||(n.spec.tasks=[fe]),t.hasTasks||(n.spec.tasks=void 0,n.spec.introduction=void 0,n.spec.prerequisites=[]),t.fields.url||(n.spec.link=void 0),t.fields.duration||(n.spec.durationMinutes=void 0),n.metadata={...Te,...t.extraMetadata},{...e,...n}}))}n(e)},onChangeQuickStartSpec:e=>{var t;t=()=>e,m((e=>({...e,spec:{...e.spec,...t(e.spec)}})))},onChangeBundles:v,onChangeCurrentStage:f,resetCreator:e,files:g})),E?r().createElement(i.E,{span:12,lg:6,className:"pf-v5-u-pt-md-on-lg"},r().createElement(xe,{kindMeta:p?.meta??null,quickStart:b,currentStage:k})):null)))},Re=()=>{const[e,t]=(0,a.useState)(0n);return r().createElement(Ae,{key:e,resetCreator:()=>t((e=>e+1n))})}},4198:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var a=n(1680),r=n.n(a),l=n(6738),s=n(7603),i=n(3440),o=n(8490);const c=()=>r().createElement(o.I,{className:"lr-c-bookmark__icon"},r().createElement(i.Ay,null)),u=()=>r().createElement(o.I,{className:"lr-c-bookmark__icon"},r().createElement(s.Ay,null)),d=({quickStart:e,bookmarks:t,isActive:n,status:a})=>r().createElement("div",{className:"lr-c-quickstart_tile"},r().createElement(l.QuickStartTile,{action:null!==t?{"aria-label":t.isFavorite?`Remove quickstart ${e.spec.displayName} from bookmarks.`:`Bookmark quickstart ${e.spec.displayName}.`,icon:t.isFavorite?u:c,onClick:e=>{e.preventDefault(),e.stopPropagation(),t.setFavorite(!t.isFavorite)}}:void 0,quickStart:{...e,spec:{...e.spec,icon:null}},isActive:n,status:a}))},5823:()=>{},8750:()=>{},2275:()=>{},9205:()=>{},681:()=>{},9826:()=>{},5067:()=>{},1741:()=>{},875:()=>{},9829:()=>{},935:()=>{},3502:()=>{},6905:()=>{},1902:()=>{},9697:()=>{},1858:()=>{},1069:()=>{},3619:()=>{},2004:()=>{},4895:()=>{},7302:()=>{},3701:()=>{},1036:()=>{},8700:()=>{},1641:()=>{},6078:()=>{},2686:()=>{},545:()=>{},8497:()=>{},5937:()=>{},5637:()=>{},6073:()=>{},7553:()=>{},7879:()=>{},7034:()=>{},43:()=>{},8195:()=>{},8469:()=>{},7077:()=>{},1289:()=>{},199:()=>{},6752:()=>{},5586:()=>{},2804:()=>{}}]);
//# sourceMappingURL=../../sourcemaps/exposed-./Creator.cdbd415ffddde7479f67c8ddcee3c02b.js.map