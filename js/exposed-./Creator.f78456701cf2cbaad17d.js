(self.webpackChunklearningResources=self.webpackChunklearningResources||[]).push([[65],{34243:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ee});var n=a(32747),s=a.n(n),r=a(73600),i=a(50693),l=a(16475),o=a(74277),c=a(32045),u=a(38779),d=a(47173),m=a(48124),p=a(53983);const k=Object.freeze({documentation:{displayName:"Documentation",tagColor:"orange",fields:{url:!0},extraMetadata:{externalDocumentation:!0}},quickstart:{displayName:"Quickstart",tagColor:"green",hasDuration:!0,fields:{duration:!0},hasTasks:!0,extraMetadata:{}},learningPath:{displayName:"Learning path",tagColor:"cyan",fields:{url:!0},extraMetadata:{learningPath:!0}},other:{displayName:"Other",tagColor:"purple",fields:{url:!0},extraMetadata:{otherResource:!0}}});function v(e){return Object.hasOwn(k,e)}function f(e){return k[e]}const h=Object.freeze(Object.keys(k)),E=Object.entries(k).map((([e,t])=>{if(!v(e))throw new Error("unexpected item kind");return[e,t]}));var g=a(99087),b=a(70363),C=a(4907);const S=e=>s().createElement(g.lP,{subscription:{pristine:!0,valid:!0,validating:!0,values:!0}},(t=>{const a=e.nextStep?e.selectNext(e.nextStep,(()=>t)):void 0;return s().createElement(s().Fragment,null,void 0!==a?e.renderNextButton({submitLabel:"Next"}):null,s().createElement(d.zx,{type:"button",variant:"secondary",isDisabled:e.disableBack,onClick:()=>e.handlePrev()},"Back"))})),y={type:g.DC.REQUIRED};function T(e){return`step-details-${e}`}const x="kind",w="title",D="bundles",N="description",M="duration",q="panel-overview",Q="prerequisites",R="task-titles",P="step-panel-overview",A="step-download",I="tasks",L="content",$="step-task-detail-";function F(e){return`${$}${e}`}function O(e){return{name:F(e),title:`Task ${e+1}`,fields:[{component:g.yb.TEXTAREA,name:`${I}[${e}].${L}`,label:"Task data (YAML)",resizeOrientation:"vertical"},{component:"lr-task-error",name:`internal-task-errors[${e}]`,index:e}],nextStep:({values:t})=>e+1<(t?.[R]?.length??0)?F(e+1):A}}var _=a(55140),z=a(35240);const Z={title:"",yamlContent:""},B=[""],X=({values:e,onChangeKind:t,onChangeBundles:a,onChangeQuickStartSpec:s,onChangeTaskContents:r})=>{const i=e[D];(0,n.useEffect)((()=>{a(i??[])}),[i]);const l=e[x],o=e[w],c=e[N],u=e.url,d=e[M],m=e[Q],p=e[q],k=e[R]??B,h=e[I],E="string"==typeof l&&v(l)?l:null,g=null!==E?f(E):null;(0,n.useEffect)((()=>{t(E)}),[E]);const b=(0,n.useMemo)((()=>{if(!0!==g?.hasTasks)return[];const e=[];for(let t=0;t<(k?.length??0);++t)e.push(h?.[t]?.content??"");return e}),[g,k,h]);(0,n.useEffect)((()=>{s({type:null!==g?{text:g.displayName,color:g.tagColor}:void 0,displayName:o??"",description:c??"",icon:null,link:g?.fields?.url&&void 0!==u?{text:"View documentation",href:u}:void 0,durationMinutes:g?.fields?.duration&&"number"==typeof d?d:void 0,prerequisites:!0===g?.hasTasks?m:void 0,introduction:!0===g?.hasTasks?p:void 0,tasks:!0===g?.hasTasks?(k??[]).map((e=>({title:e}))):void 0})}),[g,l,o,c,u,d,m,p,k]),(0,n.useEffect)((()=>{r(b)}),[b])},j=s().createContext({errors:{taskErrors:new Map},files:[],onChangeCurrentTask:()=>{}}),V=({index:e})=>{const t=(0,n.useContext)(j).errors.taskErrors.get(e);return void 0!==t?s().createElement("pre",{style:{whiteSpace:"pre-wrap"}},t):void 0},K=()=>{const{files:e}=(0,n.useContext)(j);return s().createElement("div",null,"Download these files.",e.map((e=>s().createElement("div",{key:e.name},s().createElement(d.zx,{variant:"secondary",icon:s().createElement(p.ZP,null),onClick:()=>{const t=e.name.lastIndexOf("."),a=-1!==t?e.name.substring(0,t):e.name,n=-1!==t?e.name.substring(t+1):"txt";(0,z.Sv)(e.content,a,n)}},e.name),s().createElement(m.M5,{isCode:!0,isReadOnly:!0,variant:m.oo.expansion,hoverTip:"Copy",clickTip:"Copied"},e.content)))))},U=()=>{const e=(0,n.useContext)(b.default),t=(0,n.useContext)(j);(0,n.useEffect)((()=>{var a;t.onChangeCurrentTask((a=e.currentStep.name).startsWith($)?parseInt(a.substring($.length)):null)}),[e.currentStep.name])},J=({onChangeKind:e,onChangeQuickStartSpec:t,onChangeBundles:a,onChangeTaskContents:r,onChangeCurrentTask:i,files:l,errors:o})=>{const c=(0,_.Z)(),u=(0,n.useMemo)((()=>function(e){const t=e.getAvailableBundles(),a=[];for(let e=0;e<10;++e)a.push(O(e));const n={fields:[{component:g.yb.WIZARD,name:"wizard-learning-resource",isDynamic:!0,crossroads:[x,R],fields:[{name:"step-kind",title:"Select content type",fields:[{component:g.yb.SELECT,name:x,label:"Type",simpleValue:!0,options:E.map((([e,t])=>({value:e,label:t.displayName}))),isRequired:!0,validate:[y]}],nextStep:{when:x,stepMapper:Object.fromEntries(h.map((e=>[e,T(e)])))}},...h.map((e=>function(e,t){const a=f(e),n=[];var s;return n.push({component:g.yb.TEXT_FIELD,name:w,label:"Title",isRequired:!0,validate:[y]},{component:g.yb.SELECT,name:D,label:"Bundles",simpleValue:!0,isMulti:!0,options:t.map((e=>({value:e.id,label:`${e.title} (${e.id})`})))},{component:g.yb.TEXT_FIELD,name:N,label:"Description",isRequired:!0,validate:[y]}),a.fields.duration&&n.push({component:g.yb.TEXT_FIELD,name:M,label:"Duration",dataType:g.DJ.NUMBER,isRequired:!0,validate:[y]}),a.fields.url&&n.push({component:g.yb.TEXT_FIELD,name:"url",label:"URL",isRequired:!0,validate:[y,{type:g.DC.URL}],condition:(s=e=>!0===e.fields.url,{when:x,is:e=>"string"==typeof e&&v(e)&&s(f(e))})}),{name:T(e),title:`${a.displayName} details`,fields:n,nextStep:a.hasTasks?P:A}}(e,t))),{name:P,title:"Panel overview",fields:[{component:g.yb.TEXTAREA,name:q,label:"Introduction (Markdown)",resizeOrientation:"vertical"},{component:g.yb.FIELD_ARRAY,name:Q,label:"Prerequisites",noItemsMessage:"No prerequisites have been added.",fields:[{component:g.yb.TEXT_FIELD,label:"Prerequisite"}]},{component:g.yb.FIELD_ARRAY,name:R,label:"Tasks",minItems:1,maxItems:10,noItemsMessage:"No tasks have been added.",initialValue:[""],fields:[{component:g.yb.TEXT_FIELD,label:"Title"}]}],nextStep:F(0)},...a,{name:A,title:"Download files",fields:[{component:"lr-download-files",name:"internal-download"}]}]}]};for(const e of n.fields)if(e.component===g.yb.WIZARD)for(const t of e.fields)t.fields.push({component:"lr-wizard-spy",name:`internal-wizard-spies.${t.name}`}),void 0===t.buttons&&(t.buttons=S);return n}(c)),[]),d=(0,n.useMemo)((()=>({errors:o,files:l,onChangeCurrentTask:i})),[o,l]),m={...C.ZP,"lr-task-error":V,"lr-download-files":K,"lr-wizard-spy":U};return s().createElement(j.Provider,{value:d},s().createElement(g.lT,{onSubmit:()=>{},schema:u,componentMapper:m},(({formFields:n})=>s().createElement("form",{onSubmit:e=>e.preventDefault(),className:"pf-v5-c-form"},s().createElement(g.lP,{subscription:{values:!0}},(n=>s().createElement(X,{values:n.values,onChangeKind:e,onChangeBundles:a,onChangeQuickStartSpec:t,onChangeTaskContents:r}))),s().createElement(s().Fragment,null,n)))))};var W=a(8114),Y=a(54634);const G=({kindMeta:e,quickStart:t,currentTask:a})=>{const r=(0,n.useMemo)((()=>[t]),[t]),[i,l]=(0,n.useState)({}),[o,c]=(0,n.useState)(a),d=(0,n.useContext)(W.QuickStartContext),m=(0,W.useValuesForQuickStartContext)({allQuickStarts:[t],activeQuickStartID:!0===e?.hasTasks?t.metadata.name:"",setActiveQuickStartID:()=>{},allQuickStartStates:i,setAllQuickStartStates:e=>l(e),useQueryParams:!1,footer:d.footer,focusOnQuickStart:!1});return m.allQuickStarts?.[0]!==t&&m.setAllQuickStarts?.([t]),o===a&&void 0!==m?.activeQuickStartState||(c(a),null!==a?m.setQuickStartTaskNumber?.(t.metadata.name,a):m.restartQuickStart?.(t.metadata.name,t.spec.tasks?.length??0)),s().createElement(W.QuickStartContext.Provider,{value:m},s().createElement(W.QuickStartDrawer,{quickStarts:r},s().createElement("section",null,s().createElement(u.D,{headingLevel:"h2",size:"xl",className:"pf-v5-u-mb-md"},"Live card preview"),s().createElement("div",{className:"rc-tile-preview-wrapper"},s().createElement(Y.Z,{quickStart:t,bookmarks:null,isActive:!1,status:W.QuickStartStatus.NOT_STARTED})))))},H={name:"test-quickstart"},ee=()=>{const[e,t]=(0,n.useState)(null),[a,d]=(0,n.useState)({metadata:{name:"test-quickstart"},spec:{displayName:"",icon:null,description:""}}),m=null!==e?{id:e,meta:f(e)}:null,[p,k]=(0,n.useState)([]),[v,h]=(0,n.useState)([]),[E,g]=(0,n.useState)(null),[b,C]=(0,n.useMemo)((()=>function(e,t,a){const n=null!==e?f(e):null,[s,i]=(()=>{if(!0!==n?.hasTasks)return[void 0,new Map];const e=[],s=new Map;if(void 0!==t.spec.tasks)for(let n=0;n<t.spec.tasks.length;++n){const i=t.spec.tasks[n];try{e.push({...r.ZP.parse(a[n]),title:i.title})}catch(t){if(!(t instanceof r.tv))throw t;e.push({...Z,title:i.title}),s.set(n,t.message)}}return[e,s]})();return[{...t,metadata:{...t.metadata,name:"test-quickstart",...n?.extraMetadata??{}},spec:{...t.spec,tasks:s}},{taskErrors:i}]}(e,a,v)),[e,a,v]),S=(0,n.useMemo)((()=>{const e=b.spec.displayName.toLowerCase().replaceAll(/\s/g,"-").replaceAll(/(^-+)|(-+$)/g,""),t={...b};return t.spec={...t.spec},t.metadata={...t.metadata,name:e},delete t.spec.icon,[{name:"metadata.yaml",content:r.ZP.stringify({kind:"QuickStarts",name:e,tags:p.toSorted().map((e=>({kind:"bundle",value:e})))})},{name:`${e}.yaml`,content:r.ZP.stringify(t)}]}),[b,p]);if((b.spec.tasks?.length??0)!=v.length)throw new Error(`Mismatch between quickstart tasks and task contents: ${b.spec.tasks?.length} vs ${v.length}`);return s().createElement(o.C,null,s().createElement(c.NP,{variant:"darker"},s().createElement(u.D,{headingLevel:"h1",size:"2xl"},"Add new learning resources"),s().createElement("p",null,"Description")),s().createElement(c.NP,{isFilled:!0},s().createElement(i.r,{hasGutter:!0,className:"pf-v5-u-h-100 pf-v5-u-w-100"},s().createElement(l.P,{span:12,lg:6},s().createElement(J,{onChangeKind:e=>{if(null!==e){const t=f(e);d((e=>{const a={};return a.spec={...e.spec},a.spec.type={text:t.displayName,color:t.tagColor},!t.hasTasks||void 0!==e.spec.tasks&&0!==e.spec.tasks.length||(a.spec.tasks=[Z]),t.hasTasks||(a.spec.tasks=void 0,a.spec.introduction=void 0,a.spec.prerequisites=[]),t.fields.url||(a.spec.link=void 0),t.fields.duration||(a.spec.durationMinutes=void 0),a.metadata={...H,...t.extraMetadata},{...e,...a}})),t.hasTasks?h((e=>0===e.length?[""]:e)):t.hasTasks||h([])}t(e)},onChangeQuickStartSpec:e=>{var t;t=()=>e,d((e=>({...e,spec:{...e.spec,...t(e.spec)}})))},onChangeBundles:k,onChangeTaskContents:h,onChangeCurrentTask:g,errors:C,files:S})),s().createElement(l.P,{span:12,lg:6},s().createElement(G,{kindMeta:m?.meta??null,quickStart:b,currentTask:E})))))}},54634:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var n=a(32747),s=a.n(n),r=a(8114),i=a(33864),l=a(37582),o=a(78057);const c=()=>s().createElement(o.J,{className:"lr-c-bookmark__icon"},s().createElement(l.ZP,null)),u=()=>s().createElement(o.J,{className:"lr-c-bookmark__icon"},s().createElement(i.ZP,null)),d=({quickStart:e,bookmarks:t,isActive:a,status:n})=>s().createElement("div",{className:"lr-c-quickstart_tile"},s().createElement(r.QuickStartTile,{action:null!==t?{"aria-label":t.isFavorite?`Remove quickstart ${e.spec.displayName} from bookmarks.`:`Bookmark quickstart ${e.spec.displayName}.`,icon:t.isFavorite?u:c,onClick:e=>{e.preventDefault(),e.stopPropagation(),t.setFavorite(!t.isFavorite)}}:void 0,quickStart:{...e,spec:{...e.spec,icon:null}},isActive:a,status:n}))},82472:()=>{},97890:()=>{},17657:()=>{},22972:()=>{},43389:()=>{},45467:()=>{},70347:()=>{},11452:()=>{},58392:()=>{},34946:()=>{},10497:()=>{},32857:()=>{},37625:()=>{},10108:()=>{},54476:()=>{},30187:()=>{},40837:()=>{},90479:()=>{},78752:()=>{},71338:()=>{},44839:()=>{},74282:()=>{},8572:()=>{},98379:()=>{},25238:()=>{},92084:()=>{},1508:()=>{},91993:()=>{},99624:()=>{},27479:()=>{},66822:()=>{},93661:()=>{},56024:()=>{},43390:()=>{},22143:()=>{},314:()=>{},49854:()=>{},40209:()=>{},87234:()=>{},38299:()=>{},72816:()=>{}}]);
//# sourceMappingURL=../../sourcemaps/exposed-./Creator.fe3478d8528e2ad1b33adaaa2443cf64.js.map